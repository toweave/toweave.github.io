{"data":{"site":{"siteMetadata":{"title":"Toweave's blog. Power by Gatsby & React.","author":"Toweave"}},"markdownRemark":{"id":"d10728e0-49ab-5e3a-b576-b1a1459d1457","excerpt":"根据浮点数的定义，非整数的 Number 类型无法用   来比较（  也不行） 这里输出的结果是 true，说明两边不相等。 \n所以正确的比较方法是使用 JavaScript 提供的最小精度值： 小记  JavaScript 中有 +0 和 -…","html":"<p>根据浮点数的定义，非整数的 Number 类型无法用 <code class=\"language-text\">==</code> 来比较（<code class=\"language-text\">===</code> 也不行）</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> <span class=\"token number\">0.1</span> <span class=\"token operator\">+</span> <span class=\"token number\">0.2</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true  </span>\n<span class=\"token comment\">// 0.1 + 0.2 = 0.30000000000000004</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>这里输出的结果是 true，说明两边不相等。\n所以正确的比较方法是使用 JavaScript 提供的最小精度值：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span> <span class=\"token operator\">+</span> <span class=\"token number\">0.2</span> <span class=\"token operator\">-</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> Number<span class=\"token punctuation\">.</span><span class=\"token constant\">EPSILON</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true  </span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>小记 </p>\n<p>JavaScript 中有 +0 和 -0，在加法类运算中它们没有区别，但是除法的场合则需要特别留意区分，“忘记检测除以 -0，而得到负无穷大” 的情况经常会导致错误，而区分 +0 和 -0 的方式，正是检测 1/x 是 Infinity 还是 -Infinity。</p>","frontmatter":{"date":"Monday, April 1st 2019, 10:33:53 am","title":"浮点数运算的精度问题","tags":["HOT","JavaScript","精选"],"description":"根据浮点数的定义，非整数的 Number 类型无法用 `==` 来比较（`===` 也不行）"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/javascript/float-point-number/","previous":{"fields":{"slug":"/javascript/console-api/"},"frontmatter":{"title":"console 你知道到吗？","tags":["HOT","JavaScript","console"]}},"next":{"fields":{"slug":"/linux/centos-update-the-software/"},"frontmatter":{"title":"Centos 更新源，升级程序","tags":["HOT","Linux"]}}}}