{"data":{"site":{"siteMetadata":{"title":"Toweave's blog. Power by Gatsby & React.","author":"Toweave"}},"markdownRemark":{"id":"478ca1d0-243d-58d0-8576-a1976593227e","excerpt":"布局方面，css有那么几个比较热衷的问题。其中，移动端1px边框问题的讨论不亚于垂直居中。\n那么移动端1px边框问题是如何产生的呢？由于现在的手机几乎都是retina屏，css设置的1px会被渲染成2px的物理像素（针对像素比等于…","html":"<p>布局方面，css有那么几个比较热衷的问题。其中，移动端1px边框问题的讨论不亚于垂直居中。\n那么移动端1px边框问题是如何产生的呢？由于现在的手机几乎都是retina屏，css设置的1px会被渲染成2px的物理像素（针对像素比等于2的屏幕），因此看起来会比较粗。\n既然知道了问题的产生原因，那么我们就开始解决。网上有很多种方案，但实际上我们用的时候只能选一种用，所以那么“不靠谱”的就不详细叙述了…（以下方案推荐指数逐渐提高）</p>\n<h5>1. 直接设置0.5px</h5>\n<p>ios8+可以识别浮点类型的单位，因此可以渲染这个0.5px。然而，绝大部分的android机是不支持浮点类型单位的。所以这种方案pass…</p>\n<h5>2. 利用背景图</h5>\n<p>不管是border-image，还是background-image，图片的弊端还是很明显的：想改变颜色就必须要换图片，而且利用图片也比较麻烦。所以不推荐这种方案…</p>\n<h5>3. viewport + rem 实现</h5>\n<p>同时通过设置对应 viewport 的 rem 基准值，这种方式就可以像以前一样轻松愉快的写 1px 了。\n在 devicePixelRatio = 2 时，输出 viewport：  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber 0\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> \n    <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=no<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>在devicePixelRatio = 3 时，输出viewport：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber 0\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> \n    <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>initial-scale=0.3333333333333333, maximum-scale=0.3333333333333333, \n    minimum-scale=0.3333333333333333, user-scalable=no<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>这种兼容方案相对比较完美，适合新的项目，老的项目修改成本过大。\n对于这种方案，可以看看<a href=\"http://www.w3cplus.com/mobile/lib-flexible-for-html5-layout.html\">《使用Flexible实现手淘H5页面的终端适配》</a>。</p>\n<h5>4. 背景渐变实现</h5>\n<p>与background-image方案类似，只是将图片替换为css3渐变。设置1px的渐变背景，50%有颜色，50%透明。很多UI都是采用这种方法，比如：weui、mint-ui…\n单边：</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber 0\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">.background-gradient-1px</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token function\">linear-gradient</span><span class=\"token punctuation\">(</span>180deg<span class=\"token punctuation\">,</span> #f8f8f8<span class=\"token punctuation\">,</span> #f8f8f8 50%<span class=\"token punctuation\">,</span> transparent 50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-size</span><span class=\"token punctuation\">:</span> 100% 1px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-repeat</span><span class=\"token punctuation\">:</span> no-repeat<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-position</span><span class=\"token punctuation\">:</span> bottom left<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-origin</span><span class=\"token punctuation\">:</span> content-box<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>四边：（多背景渐变）</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber 0\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">.background-gradient-1px</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span>\n        <span class=\"token function\">linear-gradient</span><span class=\"token punctuation\">(</span>#000<span class=\"token punctuation\">,</span> #000 100%<span class=\"token punctuation\">,</span> transparent 100%<span class=\"token punctuation\">)</span> left / 1px 100% no-repeat<span class=\"token punctuation\">,</span>\n        <span class=\"token function\">linear-gradient</span><span class=\"token punctuation\">(</span>#000<span class=\"token punctuation\">,</span> #000 100%<span class=\"token punctuation\">,</span> transparent 100%<span class=\"token punctuation\">)</span> right / 1px 100% no-repeat<span class=\"token punctuation\">,</span>\n        <span class=\"token function\">linear-gradient</span><span class=\"token punctuation\">(</span>#000<span class=\"token punctuation\">,</span>#000 100%<span class=\"token punctuation\">,</span> transparent 100%<span class=\"token punctuation\">)</span> top / 100% 1px no-repeat<span class=\"token punctuation\">,</span>\n        <span class=\"token function\">linear-gradient</span><span class=\"token punctuation\">(</span>#000<span class=\"token punctuation\">,</span>#000 100%<span class=\"token punctuation\">,</span> transparent 100%<span class=\"token punctuation\">)</span> bottom / 100% 1px no-repeat\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/* 或者 */</span>\n<span class=\"token selector\">.background-gradient-1px</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span>\n        <span class=\"token function\">-webkit-gradient</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">,</span> left top<span class=\"token punctuation\">,</span> right bottom<span class=\"token punctuation\">,</span> <span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> transparent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> #000<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">to</span><span class=\"token punctuation\">(</span>#000<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> left / 1px 100% no-repeat<span class=\"token punctuation\">,</span>\n        <span class=\"token function\">-webkit-gradient</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">,</span> left top<span class=\"token punctuation\">,</span> right bottom<span class=\"token punctuation\">,</span> <span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> transparent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> #000<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">to</span><span class=\"token punctuation\">(</span>#000<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> right / 1px 100% no-repeat<span class=\"token punctuation\">,</span>\n        <span class=\"token function\">-webkit-gradient</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">,</span> left top<span class=\"token punctuation\">,</span> right bottom<span class=\"token punctuation\">,</span> <span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> transparent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> #000<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">to</span><span class=\"token punctuation\">(</span>#000<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> top / 100% 1px no-repeat<span class=\"token punctuation\">,</span>\n        <span class=\"token function\">-webkit-gradient</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">,</span> left top<span class=\"token punctuation\">,</span> right bottom<span class=\"token punctuation\">,</span> <span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> transparent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">color-stop</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> #000<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">to</span><span class=\"token punctuation\">(</span>#000<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> bottom / 100% 1px no-repeat\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这种方案显示是比较牛*的，不仅实现了1px的边框，还能实现多条边框。缺点就是不能实现圆角的1px边框，浏览器的兼容性也要考虑…</p>\n<h5>5. 伪类 + transform 实现</h5>\n<p>个人认为伪类 + transform 是比较完美的方法。利用 :before 或者 :after 实现 border，并 transform 的 scale 缩小一半，将 border 绝对定位。\n单边：</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber 0\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">.scale-1px</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.scale-1px:after</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 1px<span class=\"token punctuation\">;</span>\n　  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> #000<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">-webkit-transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">scaleY</span><span class=\"token punctuation\">(</span>0.5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">scaleY</span><span class=\"token punctuation\">(</span>0.5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">-webkit-transform-origin</span><span class=\"token punctuation\">:</span> 0 0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">transform-origin</span><span class=\"token punctuation\">:</span> 0 0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">-webkit-min-device-pixel-ratio</span><span class=\"token punctuation\">:</span>3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token property\">min-device-aspect-ratio</span><span class=\"token punctuation\">:</span>3<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">{</span>\n    <span class=\"token selector\">.scale-1px:after</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">-webkit-transform</span><span class=\"token punctuation\">:</span><span class=\"token function\">scaleY</span><span class=\"token punctuation\">(</span>0.333<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span><span class=\"token function\">scaleY</span><span class=\"token punctuation\">(</span>0.333<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>四边：</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber 0\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">.scale-1px</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.scale-1px:after</span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #000<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">-webkit-box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 200%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 200%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">-webkit-transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">scale</span><span class=\"token punctuation\">(</span>0.5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">scale</span><span class=\"token punctuation\">(</span>0.5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">-webkit-transform-origin</span><span class=\"token punctuation\">:</span> left top<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform-origin</span><span class=\"token punctuation\">:</span> left top<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/* 或者： */</span>\n<span class=\"token selector\">.scale-1px:after</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #000<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> -50%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> -50%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> -50%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> -50%<span class=\"token punctuation\">;</span>\n     <span class=\"token property\">-webkit-transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">scale</span><span class=\"token punctuation\">(</span>0.5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">scale</span><span class=\"token punctuation\">(</span>0.5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>至此，移动端1px的实现就这么多，如有更牛*的方案，欢迎补充~</p>\n<p><a href=\"https://www.cnblogs.com/chenwenhao/p/9350425.html\">原文地址</a></p>","frontmatter":{"date":"Monday, April 1st 2019, 7:10:26 am","title":"移动端 1px 边框","tags":["HOT","HTML"],"description":"布局方面，css有那么几个比较热衷的问题。其中，移动端1px边框问题的讨论不亚于垂直居中。那么移动端1px边框问题是如何产生的呢？由于现在的手机几乎都是retina屏，css设置的1px会被渲染成2px的物理像素（针对像素比等于2的屏幕），因此看起来会比较粗。既然知道了问题的产生原因，那么我们就开始解决。网上有很多种方案，但实际上我们用的时候只能选一种用，所以那么“不靠谱”的就不详细叙述了...（以下方案推荐指数逐渐提高）"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/htmlcss/2019-04-01-1px-summary/","previous":{"fields":{"slug":"/photo/2019-03-23-gu-cun-park/"},"frontmatter":{"title":"上海-顾村公园","tags":["HOT","精选"]}},"next":{"fields":{"slug":"/javascript/console-api/"},"frontmatter":{"title":"console 你知道到吗？","tags":["HOT","JavaScript","console"]}}}}